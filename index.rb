#!/usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'
require 'json'

require 'sinatra'


# File_Json
# Loads json file & parses file

class File_Json

  def initialize(file)
    @file = file
    @loadFile = JSON.load('/public/@file.json') # Load requested json file

    JSON.parse(@loadFile) # reply with json file parsed
  end

end

# Routes

get '/' do
  # reply with custom 404 page, only respond to api requests
  halt 404
end

get '/api/:file' do

  # listen only for the 2 routes "java_cve_data" & "last_scrape"
  pass unless params[:file] == "java_cve_data" or params[:file] == "last_scrape"
  File_Json.new(params[:file]) # reply with json as object

end

